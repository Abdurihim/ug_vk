/*
    ug_vk.js (https://github.com/finalfantasia/ug_vk)
    The MIT License (MIT)
    Copyright (c) 2013, 2014 Abdussalam Abdurrahman (abdusalam.abdurahman@gmail.com)
*/
!function(e){"use strict"
function t(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e,t){var n
for(n=0;n<e.length;n++)if(e[n]===t)return n
return-1}function r(){L={a:"ھ",b:"ب",c:"غ",D:"ژ",d:"د",e:"ې",F:"ف",f:"ا",G:"گ",g:"ە",H:"خ",h:"ى",i:"ڭ",J:"ج",j:"ق",K:"ۆ",k:"ك",l:"ل",m:"م",n:"ن",o:"و",p:"پ",q:"چ",r:"ر",s:"س",t:"ت",u:"ۇ",v:"ۈ",w:"ۋ",x:"ش",y:"ي",z:"ز","/":"ئ",";":"؛","?":"؟",",":"،",_:"—","(":")",")":"(","[":"]","]":"[","{":"»","}":"«","<":"›",">":"‹"},C=[L.f,L.g,L.e,L.h,L.o,L.u,L.K,L.v],S=L["/"],K=[L[";"],L["?"],L[","]],T={},T.K=o,T.T=i,T.Y=i,A=!0}function o(e){var t,n=e.srcElement||e.target
for(x[n.name]="ug"===x[n.name]?"en":"ug",t=0;t<G.length;t++)G[t]({target:n,keyboardMode:x[n.name]})}function i(e){var t=e.srcElement||e.target
t.dir="ltr"===t.dir?"rtl":"ltr"}function l(e){var t=e.charCodeAt(0)
return t>=_&&M>t&&a(K,e)<0}function c(e){return l(e)&&a(C,e)>=0}function u(e,t){var n,a=t,r=e.selectionStart
return c(t)&&(0===r?a=S+t:(n=e.value[r-1],(!l(n)||c(n))&&(a=S+t))),a}function s(e,t){var n,a,r,o
"selection"in D&&"createRange"in D.selection?D.selection.createRange().text=t:(n=e.selectionStart,"textarea"===e.type&&e.scrollTop&&(r=e.scrollTop,o=e.scrollLeft),t=u(e,t),e.value=e.value.slice(0,e.selectionStart)+t+e.value.slice(e.selectionEnd),r&&(e.scrollTop=r,e.scrollLeft=o),a=n+t.length,e.setSelectionRange(a,a))}function h(e,t,n){"addEventListener"in e?(e.removeEventListener(t,n,!1),e.addEventListener(t,n,!1)):(e.detachEvent("on"+t,n),e.attachEvent("on"+t,n))}function v(e,t,n){"removeEventListener"in e?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function f(e,t){function n(){v(e,"touchmove",a),v(e,"touchend",r),i=null,l=null,c=null,u=null}function a(e){var t
e.touches.length>1?n():(c=e.touches[0].pageX-i,t=e.touches[0].pageY-l,u&&0>u&&c>0||u>0&&0>c||Math.abs(t)>f?n():(u=c,e.preventDefault()))}function r(){var a=Math.abs(c)
n(),a>s&&t({target:e,direction:c>0?"RIGHT":"LEFT"})}function o(t){1===t.touches.length&&(i=t.touches[0].pageX,l=t.touches[0].pageY,h(e,"touchmove",a),h(e,"touchend",r))}var i,l,c,u,s=50,f=15
h(e,"touchstart",o)}function d(t){var n=t||e.event,a="which"in n?n.which:n.keyCode,r=String.fromCharCode(a).toUpperCase(),o=n.ctrlKey||n.metaKey
o&&r in T&&(T[r](n),"preventDefault"in n?(n.preventDefault(),n.stopPropagation()):(n.returnValue=!1,n.cancelBubble=!0))}function g(t){var n=t||e.event,a="target"in n?n.target:n.srcElement,r="which"in n?n.which:n.keyCode,o=String.fromCharCode(r),i=/^[A-Za-z]{1}$/.test(o),l=n.ctrlKey||n.metaKey,c=!1
l||"ug"!==x[a.name]||(o in L?("keyCode"in n&&!("which"in n)?n.keyCode=L[o].charCodeAt(0):s(a,L[o]),c=!0):i&&(n.returnValue=!1,c=!0)),c&&("preventDefault"in n?(n.preventDefault(),n.stopPropagation()):n.cancelBubble=!0)}function p(){var e,t,n,a=[]
for(e=D.getElementsByTagName("input"),t=D.getElementsByTagName("textarea"),n=0;n<e.length;n++)"text"===e[n].type.toLowerCase()&&a.push(e[n])
for(n=0;n<t.length;n++)a.push(t[n])
return a}function m(e){var t,n,r
if(t=p(),e.all)for(r=0;r<t.length;r++)n=t[r],a(e.blacklist,n.name)<0&&(h(n,"keydown",d),h(n,"keypress",g),f(n,o),x[n.name]="ug")
else for(r=0;r<t.length;r++)n=t[r],a(e.whitelist,n.name)>=0&&(h(n,"keydown",d),h(n,"keypress",g),f(n,o),x[n.name]="ug")}function y(){var e,t,n
for(e=p(),n=0;n<e.length;n++)t=e[n],v(t,"keydown",d),v(t,"keypress",g)}function b(e){var t=":",n=e.whitelist||"",a=e.blacklist||"",r={}
return r.all=!!e.all,r.all?a.length&&(r.blacklist=a.split(t)):n.length&&(r.whitelist=n.split(t)),r}function E(e){var t
return t=e.all?e.blacklist?n(e.blacklist):!0:n(e.whitelist)}function k(){var o={}
A||(o="object"==typeof e.UG_VK_OPTS?e.UG_VK_OPTS:b({all:e.attachAll,whitelist:e.bedit_allow,blacklist:e.bedit_deny}),E(o)&&(r(),m(o)),e.UG_VK={addInputEventListeners:function(e){var t
t=e?{all:"all"in e?!!e.all:o.all,whitelist:n(e.whitelist)?e.whitelist:o.whitelist,blacklist:n(e.blacklist)?e.blacklist:o.blacklist}:o,E(t)&&(A||r(),y(),m(t))},addKeyboardModeChangeListener:function(e){A&&t(e)&&a(G,e)<0&&G.push(e)}})}function w(t){function n(){i||(i=!0,t())}function a(){"removeEventListener"in D&&D.removeEventListener("DOMContentLoaded",a,!1),n()}function r(){if(!i){try{D.body.doScroll("up")}catch(e){return setTimeout(r,50),void 0}n()}}function o(){return"attachEvent"in D||"loading"===D.readyState?(l||(l=!0,"addEventListener"in D?(D.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)):(D.attachEvent("onload",a),r())),void 0):(n(),void 0)}var i=!1,l=!1
o()}var L,C,K,S,T,D=e.document,_=1536,M=1791,x={},A=!1,G=[]
w(k)}(window)
