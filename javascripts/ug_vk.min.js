/*
    ug_vk.js (https://github.com/finalfantasia/ug_vk)
    The MIT License (MIT)
    Copyright (c) 2013, 2014 Abdussalam Abdurrahman (abdusalam.abdurahman@gmail.com)
*/
!function(e){"use strict"
function t(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e,t){var n
for(n=0;n<e.length;n++)if(e[n]===t)return n
return-1}function i(){L={a:"ھ",b:"ب",c:"غ",D:"ژ",d:"د",e:"ې",F:"ف",f:"ا",G:"گ",g:"ە",H:"خ",h:"ى",i:"ڭ",J:"ج",j:"ق",K:"ۆ",k:"ك",l:"ل",m:"م",n:"ن",o:"و",p:"پ",q:"چ",r:"ر",s:"س",t:"ت",u:"ۇ",v:"ۈ",w:"ۋ",x:"ش",y:"ي",z:"ز","/":"ئ",";":"؛","?":"؟",",":"،",_:"—","(":")",")":"(","[":"]","]":"[","{":"»","}":"«","<":"›",">":"‹"},C=[L.f,L.g,L.e,L.h,L.o,L.u,L.K,L.v],T=L["/"],S=[L[";"],L["?"],L[","]],K={},K.K=r,K.T=o,K.Y=o,A=!0}function r(e){var t,n=e.srcElement||e.target
for(x[n.name]="ug"===x[n.name]?"en":"ug",t=0;t<G.length;t++)G[t]({target:n,keyboardMode:x[n.name]})}function o(e){var t=e.srcElement||e.target
t.dir="ltr"===t.dir?"rtl":"ltr"}function l(e){var t=e.charCodeAt(0)
return t>=_&&M>t&&a(S,e)<0}function c(e){return l(e)&&a(C,e)>=0}function u(e,t){var n,a=t,i=e.selectionStart
return c(t)&&(0===i?a=T+t:(n=e.value[i-1],(!l(n)||c(n))&&(a=T+t))),a}function s(e,t){var n,a,i,r
"selection"in D&&"createRange"in D.selection?D.selection.createRange().text=t:(n=e.selectionStart,"textarea"===e.type&&e.scrollTop&&(i=e.scrollTop,r=e.scrollLeft),t=u(e,t),e.value=e.value.slice(0,e.selectionStart)+t+e.value.slice(e.selectionEnd),i&&(e.scrollTop=i,e.scrollLeft=r),a=n+t.length,e.setSelectionRange(a,a))}function h(e,t,n){"addEventListener"in e?(e.removeEventListener(t,n,!1),e.addEventListener(t,n,!1)):"attachEvent"in e&&(e.detachEvent("on"+t,n),e.attachEvent("on"+t,n))}function f(e,t,n){"removeEventListener"in e?e.removeEventListener(t,n,!1):"detachEvent"in e&&e.detachEvent("on"+t,n)}function v(e,t){function n(){f(e,"touchmove",a),f(e,"touchend",i),o=null,l=null,c=null,u=null}function a(e){var t
e.touches.length>1?n():(c=e.touches[0].pageX-o,t=e.touches[0].pageY-l,u&&0>u&&c>0||u>0&&0>c||Math.abs(t)>v?n():(u=c,e.preventDefault()))}function i(){var a=Math.abs(c)
n(),a>s&&t({target:e,direction:c>0?"RIGHT":"LEFT"})}function r(t){1===t.touches.length&&(o=t.touches[0].pageX,l=t.touches[0].pageY,h(e,"touchmove",a),h(e,"touchend",i))}var o,l,c,u,s=50,v=15
h(e,"touchstart",r)}function d(t){var n=t||e.event,a="which"in n?n.which:n.keyCode,i=String.fromCharCode(a).toUpperCase(),r=n.ctrlKey||n.metaKey
r&&i in K&&(K[i](n),"preventDefault"in n?(n.preventDefault(),n.stopPropagation()):(n.returnValue=!1,n.cancelBubble=!0))}function g(t){var n=t||e.event,a="target"in n?n.target:n.srcElement,i="which"in n?n.which:n.keyCode,r=String.fromCharCode(i),o=/^[A-Za-z]{1}$/.test(r),l=n.ctrlKey||n.metaKey,c=!1
l||"ug"!==x[a.name]||(r in L?("keyCode"in n&&!("which"in n)?n.keyCode=L[r].charCodeAt(0):s(a,L[r]),c=!0):o&&(n.returnValue=!1,c=!0)),c&&("preventDefault"in n?(n.preventDefault(),n.stopPropagation()):n.cancelBubble=!0)}function m(){var e,t,n,a=[]
for(e=D.getElementsByTagName("input"),t=D.getElementsByTagName("textarea"),n=0;n<e.length;n++)"text"===e[n].type.toLowerCase()&&a.push(e[n])
for(n=0;n<t.length;n++)a.push(t[n])
return a}function p(e){var t,n,i
if(t=m(),e.all)for(i=0;i<t.length;i++)n=t[i],a(e.blacklist,n.name)<0&&(h(n,"keydown",d),h(n,"keypress",g),v(n,r),x[n.name]="ug")
else for(i=0;i<t.length;i++)n=t[i],a(e.whitelist,n.name)>=0&&(h(n,"keydown",d),h(n,"keypress",g),v(n,r),x[n.name]="ug")}function y(){var e,t,n
for(e=m(),n=0;n<e.length;n++)t=e[n],f(t,"keydown",d),f(t,"keypress",g)}function E(e){var t=":",n=e.whitelist||"",a=e.blacklist||"",i={}
return i.all=!!e.all,i.all?a.length&&(i.blacklist=a.split(t)):n.length&&(i.whitelist=n.split(t)),i}function b(e){var t
return t=e.all?e.blacklist?n(e.blacklist):!0:n(e.whitelist)}function k(){var r={}
A||(r="object"==typeof e.UG_VK_OPTS?e.UG_VK_OPTS:E({all:e.attachAll,whitelist:e.bedit_allow,blacklist:e.bedit_deny}),b(r)&&(i(),p(r)),e.UG_VK={addInputEventListeners:function(e){var t
t=e?{all:"all"in e?!!e.all:r.all,whitelist:n(e.whitelist)?e.whitelist:r.whitelist,blacklist:n(e.blacklist)?e.blacklist:r.blacklist}:r,b(t)&&(A||i(),y(),p(t))},addKeyboardModeChangeListener:function(e){A&&t(e)&&a(G,e)<0&&G.push(e)}})}function w(t){function n(){if(!o){if(!("body"in D))return setTimeout(n,1)
o=!0,t()}}function a(){if("removeEventListener"in D)D.removeEventListener("DOMContentLoaded",a,!1)
else{if(!("detachEvent"in D))return
D.detachEvent("onreadystatechange",a)}n()}function i(){if(!o){try{D.documentElement.doScroll("left")}catch(e){return setTimeout(i,1),void 0}n()}}function r(){var t=!1
if(!l){if(l=!0,"loading"!==D.readyState)return n(),void 0
if("addEventListener"in D)D.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)
else if("attachEvent"in D){D.attachEvent("onreadystatechange",a),D.attachEvent("onload",a)
try{t=!e.frameElement}catch(r){}"doScroll"in D.documentElement&&t&&i()}}}var o=!1,l=!1
r()}var L,C,S,T,K,D=e.document,_=1536,M=1791,x={},A=!1,G=[]
w(k)}(window)
